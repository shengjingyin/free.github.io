import{u as R,S as K,D as G}from"./lowcode.18c3e2e0.js";import{s as H}from"./dash-board.2c572633.js";import{d as T,f as O,r as M,a as r,o as s,c as E,w as l,e as x,t as P,u as V,v as e,E as Q,n as i,p as C,F as y,q as F,k as W,z as L,s as X}from"./index.ee99680b.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./index.da5474a2.js";const Y=T({__name:"index",props:{modelValue:String},emits:["update:modelValue"],setup(A,{emit:D}){const c=A,_=O({get(){return c.modelValue},set(v){D("update:modelValue",v)}}),p=M(null),g=M(!1),q=async()=>{var v;g.value=!0,await H(200),(v=p.value)==null||v.focus()},S=()=>{_.value.length!=0&&(g.value=!1)};return(v,f)=>{const b=r("Edit"),k=r("el-icon"),U=r("el-button"),h=r("el-input");return g.value?(s(),E(h,{key:1,ref_key:"textInput",ref:p,modelValue:V(_),"onUpdate:modelValue":f[0]||(f[0]=t=>Q(_)?_.value=t:null),autofocus:"",onBlur:S,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])):(s(),E(U,{key:0,type:"primary",text:"",onClick:q},{default:l(()=>[x(P(V(_)),1),e(k,{class:"el-icon--right"},{default:l(()=>[e(b)]),_:1})]),_:1}))}}}),Z=F("div",{class:"card-header"},"\u57FA\u672C\u914D\u7F6E",-1),ee=F("br",null,null,-1),le=F("div",{class:"card-header"}," \u8BF7\u6C42\u53C2\u6570\u8BBE\u7F6E ",-1),ue=F("br",null,null,-1),oe=F("div",{class:"card-header"},"\u54CD\u5E94\u914D\u7F6E",-1),te=T({__name:"request",setup(A,{expose:D}){const c=R();window.lowcode=c;const _=M(!1),p=M({url:"",method:"get",params:[{key:"",type:"fromDataTree",value:[]}],response:{node:"data",quietness:!1,updateModelList:[{key:[],type:"fromServe",value:""}]}}),g=["get","post","put","update","delete"],q=[{label:"\u81EA\u5B9A\u4E49",value:"custom"},{label:"\u4ECE\u6570\u636E\u7ED3\u6784\u9009\u62E9",value:"fromDataTree"}],S=[{label:"\u81EA\u5B9A\u4E49",value:"custom"},{label:"\u6765\u81EA\u8FD4\u56DE\u6570\u636E",value:"fromServe"}],v=t=>{t.request&&(p.value=t.request),t.request||(t.request=p.value),_.value=!0},f=t=>{var a;(a=p.value)==null||a.params.splice(t,1)},b=t=>{var a;t=t||0,(a=p.value)==null||a.params.splice(t,0,{key:"",value:[],type:"fromDataTree"})},k=t=>{var a,m;(m=(a=p.value)==null?void 0:a.response.updateModelList)==null||m.splice(t,1)},U=t=>{var a,m;t=t||0,(m=(a=p.value)==null?void 0:a.response.updateModelList)==null||m.splice(t+1,0,{key:[],type:"fromServe",value:""})},h=()=>{};return D({openDialog:v}),(t,a)=>{const m=r("el-button"),u=r("el-option"),w=r("el-select"),d=r("el-input"),$=r("el-form-item"),z=r("el-card"),N=r("el-cascader"),j=r("el-switch"),I=r("el-form"),J=r("el-dialog");return s(),E(J,{modelValue:_.value,"onUpdate:modelValue":a[4]||(a[4]=o=>_.value=o),title:"\u8BF7\u6C42\u53C2\u6570\u914D\u7F6E"},{default:l(()=>[e(I,{"label-position":"top",size:"small"},{default:l(()=>[e(m,{type:"primary",onClick:h},{default:l(()=>[x("\u6D4B\u8BD5\u63A5\u53E3")]),_:1}),e(z,{shadow:"never"},{header:l(()=>[Z]),default:l(()=>[e($,{label:"\u8BF7\u6C42\u8DEF\u5F84"},{default:l(()=>[e(d,{modelValue:p.value.url,"onUpdate:modelValue":a[1]||(a[1]=o=>p.value.url=o),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",class:"input-with-select"},{prepend:l(()=>[e(w,{modelValue:p.value.method,"onUpdate:modelValue":a[0]||(a[0]=o=>p.value.method=o),placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5",style:{width:"100px"}},{default:l(()=>[(s(),i(y,null,C(g,o=>e(u,{key:o,value:o},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),ee,e(z,{shadow:"never"},{header:l(()=>[le]),default:l(()=>[e($,null,{default:l(()=>[(s(!0),i(y,null,C(p.value.params,(o,B)=>(s(),i("li",{key:B,class:"table_prop",style:{"list-style":"none"}},[e(d,{modelValue:o.key,"onUpdate:modelValue":n=>o.key=n,placeholder:"\u53C2\u6570\u952EKey",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]),e(w,{modelValue:o.type,"onUpdate:modelValue":n=>o.type=n,style:{width:"150px","margin-left":"5px"}},{default:l(()=>[(s(),i(y,null,C(q,n=>e(u,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o.type==="custom"?(s(),E(d,{key:0,modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u503C",style:{width:"220px","margin-left":"1px"}},null,8,["modelValue","onUpdate:modelValue"])):(s(),E(N,{key:1,modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,options:V(c).modelMap,"show-all-levels":!1,props:{checkStrictly:!0},style:{width:"220px","margin-left":"1px"},placeholder:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u6570\u636E"},null,8,["modelValue","onUpdate:modelValue","options"])),e(m,{circle:"",plain:"",type:"primary",size:"small",icon:"Plus",style:{padding:"4px","margin-left":"5px",height:"24px"},onClick:n=>b(B)},null,8,["onClick"]),e(m,{circle:"",plain:"",type:"danger",size:"small",icon:"Minus",style:{padding:"4px","margin-left":"5px",height:"24px"},onClick:n=>f(B)},null,8,["onClick"])]))),128))]),_:1})]),_:1}),ue,e(z,{shadow:"never"},{header:l(()=>[oe]),default:l(()=>[e($,{label:"\u54CD\u5E94\u6570\u636E\u8282\u70B9"},{default:l(()=>[e(d,{modelValue:p.value.response.node,"onUpdate:modelValue":a[2]||(a[2]=o=>p.value.response.node=o),placeholder:"\u63A5\u53E3\u8FD4\u56DE\u6570\u636E\u8282\u70B9, \u8BE5\u8282\u70B9\u7684\u6570\u636E\u4F1A\u8D4B\u503C\u7ED9\u7EC4\u4EF6, \u6BD4\u5982data.list"},null,8,["modelValue"])]),_:1}),e($,{label:"\u9759\u9ED8\u8BF7\u6C42(\u5931\u8D25\u540E\u4E0D\u63D0\u793A\u62A5\u9519\u4FE1\u606F)"},{default:l(()=>[e(j,{modelValue:p.value.response.quietness,"onUpdate:modelValue":a[3]||(a[3]=o=>p.value.response.quietness=o)},null,8,["modelValue"])]),_:1}),e($,{label:"\u66F4\u65B0\u6570\u636E"},{default:l(()=>[(s(!0),i(y,null,C(p.value.response.updateModelList,(o,B)=>(s(),i("li",{key:B,class:"table_prop",style:{"list-style":"none"}},[e(N,{modelValue:o.key,"onUpdate:modelValue":n=>o.key=n,options:V(c).modelMap,"show-all-levels":!1,props:{checkStrictly:!0},clearable:"",style:{width:"180px"},placeholder:"\u76EE\u6807\u6570\u636E"},null,8,["modelValue","onUpdate:modelValue","options"]),e(w,{modelValue:o.type,"onUpdate:modelValue":n=>o.type=n,placeholder:"\u6570\u636E\u7C7B\u578B",style:{width:"160px","margin-left":"5px"}},{default:l(()=>[(s(),i(y,null,C(S,n=>e(u,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(d,{modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,placeholder:o.type==="custom"?"\u8BF7\u8F93\u5165\u66F4\u65B0\u503C":"\u8BF7\u8F93\u5165\u6570\u636E\u5B57\u6BB5(\u5982data.name)",style:{width:"220px","margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(m,{circle:"",plain:"",type:"danger",size:"small",icon:"el-icon-plus",style:{padding:"4px","margin-left":"5px"},onClick:n=>U(B)},null,8,["onClick"]),e(m,{circle:"",plain:"",type:"danger",size:"small",icon:"el-icon-minus",style:{padding:"4px","margin-left":"5px"},onClick:n=>k(B)},null,8,["onClick"])]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ae=F("h5",null," \u9ED8\u8BA4\u76D1\u542C\u4E8B\u4EF6 ",-1),ne=F("br",null,null,-1),me=T({__name:"action",props:{config:{type:Object,required:!0}},setup(A){const D=A,c=R(),_=M(),p=O(()=>D.config.triggerCondition),g=O(()=>D.config.type);W(()=>c.select,()=>{X.set("data",JSON.stringify(c.data))},{deep:!0});const q=()=>{const f=S(c.select);c.select.actions.push(f)},S=f=>({name:`${f.name} - \u52A8\u4F5C ${f.actions.length+1}`,download:{type:"image/jpeg"},skip:{type:"_blank"}}),v=f=>{var k;const b=c.select.actions[f];(k=_.value)==null||k.openDialog(b)};return(f,b)=>{const k=r("free-tag"),U=r("el-button"),h=r("free-select"),t=r("el-form-item"),a=r("el-input"),m=r("el-cascader");return s(),i(y,null,[ae,(s(!0),i(y,null,C(A.config.eventList,u=>(s(),E(k,{key:u},{default:l(()=>[x(P(u.label),1)]),_:2},1024))),128)),F("h5",null,[x(" \u52A8\u4F5C\u914D\u7F6E "),e(U,{onClick:q},{default:l(()=>[x("\u6DFB\u52A0")]),_:1})]),(s(!0),i(y,null,C(V(c).select.actions,(u,w)=>(s(),i("div",{key:w},[e(Y,{modelValue:u.name,"onUpdate:modelValue":d=>u.name=d},null,8,["modelValue","onUpdate:modelValue"]),ne,e(t,{label:"\u89E6\u53D1\u6761\u4EF6"},{default:l(()=>[e(h,{option:V(p),modelValue:u.trigger,"onUpdate:modelValue":d=>u.trigger=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"\u89E6\u53D1\u7C7B\u578B"},{default:l(()=>[e(h,{option:V(g),modelValue:u.type,"onUpdate:modelValue":d=>u.type=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024),u.type==="skip"?(s(),i(y,{key:0},[e(t,{label:"\u8D44\u6E90\u5730\u5740"},{default:l(()=>[e(a,{modelValue:u.skip.url,"onUpdate:modelValue":d=>u.skip.url=d,placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u5730\u5740"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"\u5728\u4F55\u5904\u6253\u5F00\u6587\u6863"},{default:l(()=>[e(h,{option:V(K),modelValue:u.skip.type,"onUpdate:modelValue":d=>u.skip.type=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):L("",!0),u.type==="download"?(s(),i(y,{key:1},[e(t,{label:"\u8D44\u6E90\u5730\u5740"},{default:l(()=>[e(a,{modelValue:u.download.url,"onUpdate:modelValue":d=>u.download.url=d,placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u5730\u5740"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"\u8D44\u6E90\u7C7B\u578B"},{default:l(()=>[e(h,{option:V(G),modelValue:u.download.type,"onUpdate:modelValue":d=>u.download.type=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):L("",!0),u.type==="event"?(s(),E(t,{key:2,label:"\u4E8B\u4EF6"},{default:l(()=>[e(m,{modelValue:u.event,"onUpdate:modelValue":d=>u.event=d,options:V(c).eventOption,"show-all-levels":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):L("",!0),u.type==="action"?(s(),E(t,{key:3,label:"\u52A8\u4F5C"},{default:l(()=>[e(m,{modelValue:u.action,"onUpdate:modelValue":d=>u.action=d,options:V(c).actionOption,"show-all-levels":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):L("",!0),u.type==="request"?(s(),E(t,{key:4,label:"\u8BF7\u6C42\u914D\u7F6E"},{default:l(()=>[e(U,{onClick:d=>v(w)},{default:l(()=>[x("\u914D\u7F6E")]),_:2},1032,["onClick"])]),_:2},1024)):L("",!0)]))),128)),e(te,{ref_key:"requestRef",ref:_},null,512)],64)}}});export{me as default};
